FROM debian

RUN apk add --no-cache curl \
    &&  bash -c "$(curl -L https://sing-box.vercel.app)" @ install --beta

# install static sing-box
FROM scratch

# copy local files && sing-box
COPY --from=builder /usr/local/bin/sing-box /usr/local/bin/sing-box
COPY --from=builder /usr/local/share/sing-box/geoip.db /usr/local/share/sing-box/geoip.db
COPY --from=builder /usr/local/share/sing-box/geosite.db /usr/local/share/sing-box/geosite.db

CMD [ "run","-D","/usr/local/bin/sing-box"]
